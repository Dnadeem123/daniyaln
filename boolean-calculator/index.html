<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Boolean Algebra Calculator</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
      mermaid.initialize({ startOnLoad: false });
    </script>
  </head>
  <body>
    <header class="app-header">
      <h1>Boolean Algebra Calculator</h1>
      <p>
        Enter a Boolean expression using operators like AND, OR, NOT, XOR, NAND,
        NOR. Up to 5 variables are supported.
      </p>
      <p style="font-size: 0.9rem; margin-top: 0.5rem; opacity: 0.9;">
        ‚ú® Features: Truth Tables ‚Ä¢ K-Maps ‚Ä¢ Circuit Diagrams ‚Ä¢ SOP/POS/DNF/CNF ‚Ä¢ Step-by-Step Simplification
      </p>
    </header>

    <main class="app">
      <section class="input-panel">
        <label for="expression-input">Boolean Expression</label>
        <textarea
          id="expression-input"
          rows="3"
          placeholder="Example: (A AND B') OR (C XOR D)"
        ></textarea>
        <div class="input-hints">
          <strong>Tip:</strong> Supported symbols include AND/¬∑/&amp;/¬∑/*, OR/+/|, NOT/!/~/' (postfix),
          XOR/^/‚äï, NAND, NOR.
          <br><strong>Examples:</strong> Try <code>A AND B</code>, <code>(A+B)¬∑C</code>, <code>A' OR B</code>, or <code>A XOR B</code>
        </div>
        <div class="actions">
          <button id="evaluate-btn">Evaluate</button>
          <button id="clear-btn" class="ghost">Clear</button>
          <button id="example-btn" class="ghost">Load Example</button>
        </div>
        <div id="error-box" class="error-box" hidden></div>
      </section>

      <section class="results" id="results" hidden>
        <div class="result-card" id="summary-card">
          <h2>Summary</h2>
          <div class="summary-grid">
            <div>
              <h3>Detected Variables</h3>
              <p id="detected-variables"></p>
            </div>
            <div>
              <h3>Expression (Normalized)</h3>
              <p id="normalized-expression"></p>
            </div>
          </div>
        </div>

        <div class="result-card" id="simplification-card">
          <h2>Expression Simplification</h2>
          <div class="simplified-forms">
            <div>
              <h3>Minimal SOP</h3>
              <p id="minimal-sop"></p>
            </div>
            <div>
              <h3>Minimal POS</h3>
              <p id="minimal-pos"></p>
            </div>
            <div>
              <h3>Canonical DNF</h3>
              <p id="canonical-dnf"></p>
            </div>
            <div>
              <h3>Canonical CNF</h3>
              <p id="canonical-cnf"></p>
            </div>
          </div>
          <details class="step-details" open>
            <summary>Step-by-step simplification</summary>
            <ol id="simplification-steps"></ol>
          </details>
        </div>

        <div class="result-card" id="truth-table-card">
          <h2>Truth Table</h2>
          <div class="table-wrapper">
            <table id="truth-table"></table>
          </div>
        </div>

        <div class="result-card" id="kmap-card">
          <h2>Karnaugh Map</h2>
          <div id="kmap-container"></div>
        </div>

        <div class="result-card" id="circuit-card">
          <h2>Logic Circuit Diagram</h2>
          <div id="circuit-diagram" class="circuit-diagram"></div>
        </div>

        <div class="result-card" id="export-card">
          <h2>Export Results</h2>
          <div class="actions">
            <button id="copy-results-btn" class="ghost">üìã Copy All Results</button>
            <button id="download-results-btn" class="ghost">‚¨áÔ∏è Download as Text</button>
          </div>
        </div>
      </section>
    </main>

    <footer class="app-footer">
      <p>
        Ready for WordPress: embed this widget using a Custom HTML block or
        snippet plugin.
      </p>
    </footer>

    <script type="module" src="app.js"></script>
  </body>
</html>
